---
marp: true
theme: gaia
paginate: true
math: katex
_class: lead
---

<!-- #REGION -->
<style>
:root {
  font-family: "Fira Sans", "Sans";
}

section {
  font-size: 32px;
}


h1, h2, h3 {
  text-align: center;
}

h1 {
  font-size: 1em;
  font-weight: normal;
  color: blue;
}

h2, h3 {
  font-size: 1em;
  font-weight: normal;
}

b, strong {
   color: blue;
   font-style: normal;
   font-weight: 500;
}

b, em {
   color: red;
   font-style: normal;
}

.columns {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;
}
</style>    
<!-- #ENDREGION -->


# **期望效用**

## 授课教师: **雷浩然**

## 湖南大学课程

---

张三是一名湖大学生. 他在上体育课时, 教练给了他如下两个选择:

1. 和教练玩石头剪刀布 (如果平局, 则再玩一局, 直到有人获胜为止):
   - 若张三赢了, 则不用参加训练
   - 若张三输了, 则不仅要参加训练, 还要额外跑 2 千米

2. 不和教练玩石头剪刀布, 直接训练.

张三是否应该和教练玩剪刀石头布?

(本问题由*邱奥雅*同学贡献)

---

- 张三的行动集: {*玩*石头剪刀布, *不玩*石头剪刀布}. To play or not to play?

- 所有可能结果:
  1. "*不参加训练*",
  1. "*参加训练*", 
  1. "*参加训练 + 跑2千米*"

- 效用:
    - 记不参加训练效用为 $0$. 
    - 参加训练的效用为 ${-x}$, 其中 $x > 0$
    - 参加训练并跑 2 千米的效用为 ${-x} \red{-y}$, 其中 $\red{-y}$ 为 *额外跑 2 千米的边际效用*

---

- 行动 "不玩" 导致的结果是**确定的** 
  - 结果一定是"参加训练".
  - $U(不玩) = -x$.

- 行动 "玩石头剪刀布" 导致的结果是**不确定的**:
  - 如果张三赢了 (概率 $1/2$), 结果为"不参加训练". 效用记为 $0$.
  - 如果张三输了 (概率 $1/2$), 结果为"参加训练并跑2千米." 
    效用为 $-x-y$.

$$
U(玩) = 1/2 \cdot 0 + 1/2 \cdot (-x-y) = -(x+y)/2 
$$

---

- 张三的最优选择是"玩石头剪刀布"当且仅当:
$$
U(玩)  \ge U(不玩) 
$$
$$
\iff
-(x+y) /2  \ge -x  \qquad
$$
$$
\iff
x \ge y \qquad \qquad \quad \qquad
$$


- 这个结果和我们的直觉一致. 
  - 如果张三非常厌恶参加训练 ($x$ 很大),
    他会愿意"赌一把", 即使成功率只有 50%.
  - 如果张三觉得训练完后的额外两公里非常累  ($y$ 很大), 张三不愿意"赌一把".

---
# 张三是否应该和教练玩 "石头剪刀布"?


是否和教练玩石头剪刀布, 取决于这个"交易"的成本与收益.

- 成本: 跑2千米的概率从 0 上升到 0.5, 成本为 $y/2$
- 收益: 参加训练的概率从 1 降低到 0.5, 收益为 $x/2$

如果收益大于成本 ($x/2 > y/2$), 张三应该进行这笔交易.

如果收益等于成本 ($x/2 = y/2$), 张三对这笔交易无差异.

---

# 混合策略与期望效用

- 当行为人使用混合策略时, 博弈的最终结果是**不确定的**. 
- 因此, 行为人的最终效用也是不确定的.
- 行为人的期望效用 $=$ 最终效用的**期望**


 $\,$ | 结果1 | 结果2 | 结果3 |
---------|----------|---------|----
 最终效用 | $x$ | $y$ | $z$
 概率 | $p_1$ | $p_2$ | $p_3$


期望效用 $= p_1 x + p_2 y + p_3 z$

---

# 计算期望效用

张三\李四 | 网吧 | 商场
---------|----------|---------
 网吧 | (2, 1) | (0, 0)
 商场 | (0, 0) | (1, 2)

假设李四的混合策略为 $(q, 1-q)$, 其中 $q$ 为"网吧"的概率
- 张三选择纯策略"网吧"的期望收益: $U_{张三}(网吧) = 2q$
- 张三选择纯策略"商场"的期望收益: $U_{张三}(商场) = 1-q$
- 张三选择混合策略 $(p, 1-p)$ 的期望收益 (其中 $p$ 为"网吧"的概率):
$$
p \cdot U(网吧) + (1-p) \cdot U(商场) =  p \cdot 2q + (1-p) (1-q)
$$

---

# 用无差异原则计算混合策略均衡
- 记均衡时张三和李四的混合策略分别为 $(\bar p, 1 - \bar p)$ 和 $(\bar q, 1 - \bar q)$
- 给定李四的策略, 张三对"网吧"和"商场"无差异:
$$
U_{张三}(网吧) = U_{张三}(商场) \implies 2 \bar q = 1 - \bar q \implies \bar q = 1/3
$$
- 给定张三的策略, 李四对"网吧"和"商场"无差异:
$$
U_{李四} (网吧) = U_{李四} (商场) \implies \bar p = 2(1 - \bar p) \implies \bar p = 2/3
$$

---

# 混合策略与严格劣策略

定义: 纯策略 $s_1$ 是张三的**严格劣策略**, 若存在另一个策略 $s_1'$ 使得下面的不等式对*所有李四的行动 $a_2 \in A_2$* 都成立:
$$
U_1 (s_1, a_2) > U_1 (s_1, a_2) \quad  \red{\forall a_2 \in A_2}
$$

注: 这里的 $s_1'$ 可以是**混合策略**, $U_1$ 为张三的期望效用函数.


---

# 混合策略与严格劣策略

定义: 纯策略 $s_1$ 是张三的**严格劣策略**, 若存在另一个策略 $s_1'$ 使得下面的不等式对*所有李四的行动 $a_2 \in A_2$* 都成立:
$$
U_1 (s_1, a_2) > U_1 (s_1, a_2) \quad  \red{\forall a_2 \in A_2}
$$


证明: "下" 是张三的严格劣策略.

张三\李四 | L | R
---------|----------|---------
 上 | 3,1 | 0,2
 中 | 0,2 | 3,3
 下 | 1,3 | 1,1

---

比较张三的下面两个策略:
1. 纯策略 "下": $s_1 = (0, 0, 1)$
1. 混合策略: $s_1' = (0.5, 0.5, 0)$

若李四选 $L$:
$$
U_{张三} (s_1,L) = 1 \quad
U_{张三} (s_1',L) = 1.5
$$

若李四选 $R$:
$$
U_{张三} (s_1,R) = 1.5 \quad
U_{张三} (s_1',R) = 1
$$




